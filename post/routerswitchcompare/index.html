<!DOCTYPE html>
<html lang="en-us">
<head>
    

    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-177198277-1"></script>
    <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-177198277-1');
    </script>


    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    
    <meta property="og:site_name" content="Vishnu&#39;s Blog">
    <meta property="og:type" content="article">

    
    <meta property="og:image" content="https://vishnubraj.github.io/images/main_go_wideandtall_darklayer.jpeg">
    <meta property="twitter:image" content="https://vishnubraj.github.io/images/main_go_wideandtall_darklayer.jpeg" />
    

    
    <meta name="title" content="Layer3 Switch vs Router" />
    <meta property="og:title" content="Layer3 Switch vs Router" />
    <meta property="twitter:title" content="Layer3 Switch vs Router" />
    

    
    <meta name="description" content="">
    <meta property="og:description" content="" />
    <meta property="twitter:description" content="" />
    

    
    <meta property="twitter:card" content="summary" />
    
    

    <meta name="keyword"  content="Vishnubraj, devops, prometheus, snmp_exporter, monitoring, cisco, Go, Golang, networking">
    <link rel="shortcut icon" href="/img/favicon.ico">

    <title>Layer3 Switch vs Router-Vishnu Blog</title>

    <link rel="canonical" href="/post/routerswitchcompare/">

    <link rel="stylesheet" href="/css/iDisqus.min.css"/>
	
    
    <link rel="stylesheet" href="/css/bootstrap.min.css">

    
    <link rel="stylesheet" href="/css/hux-blog.min.css">

    
    <link rel="stylesheet" href="/css/zanshang.css">
    
    
    <link href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css">

    
    

    
    
    <script src="/js/jquery.min.js"></script>
    
    
    <script src="/js/bootstrap.min.js"></script>
    
    
    <script src="/js/hux-blog.min.js"></script>

    
    

</head>



<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">Vishnu&#39;s Blog</a>
        </div>

        
        
        <div id="huxblog_navbar">
            <div class="navbar-collapse">
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="/">Home</a>
                    </li>
                    
                        
                        <li>
                            <a href="/categories/tech">tech</a>
                        </li>
                        
                    
                    
		    
                        <li><a href="/top/about/">ABOUT</a></li>
                    

                    
                </ul>
            </div>
        </div>
        
    </div>
    
</nav>
<script>
    
    
    
    var $body   = document.body;
    var $toggle = document.querySelector('.navbar-toggle');
    var $navbar = document.querySelector('#huxblog_navbar');
    var $collapse = document.querySelector('.navbar-collapse');

    $toggle.addEventListener('click', handleMagic)
    function handleMagic(e){
        if ($navbar.className.indexOf('in') > 0) {
        
            $navbar.className = " ";
            
            setTimeout(function(){
                
                if($navbar.className.indexOf('in') < 0) {
                    $collapse.style.height = "0px"
                }
            },400)
        }else{
        
            $collapse.style.height = "auto"
            $navbar.className += " in";
        }
    }
</script>




<style type="text/css">
    header.intro-header {
        background-image: url('/images/main_go_wideandtall_darklayer.jpeg')
    }
</style>
<header class="intro-header">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <div class="tags">
                        
                        <a class="tag" href="/tags/router" title="router">
                            router
                        </a>
                        
                        <a class="tag" href="/tags/switch" title="switch">
                            switch
                        </a>
                        
                    </div>
                    <h1>Layer3 Switch vs Router</h1>
                    <h2 class="subheading"></h2>
                    <span class="meta">
                        Posted by 
                        
                                 &#34;Vishnu&#34;
                         
                        on 
                        Sunday, June 6, 2021
                        
                        
                        
                    </span>
                </div>
            </div>
        </div>
    </div>
</header>




<article>
    <div class="container">
        <div class="row">

            
            <div class="
                col-lg-11 col-lg-offset-1
                col-md-10 col-md-offset-1
                post-container">

                
                <h1 id="disadvantages-of-using-layer-3-switch-as-a-router">Disadvantages of using Layer 3 switch as a router</h1>
<ul>
<li>Doesn&rsquo;t support MPLS and VPN services</li>
<li>Doesn&rsquo;t support NAT, firewalling, tunnel, IPSec</li>
<li>Size of routing table is small</li>
<li>Forwarding is performed by ASIC </li>
<li>No QOS support</li>
</ul>
<h1 id="advantages-of-using-routers">Advantages of using routers</h1>
<ul>
<li>Non-Ethernet connections (which still do exist)</li>
<li>Large routing tables</li>
<li>Many routing VRFs — campus and datacenter switches don’t need ‘em, at least for common uses
NAT, especially with protocol fixups (address in payload situations)</li>
<li>Large ACLs without loss of efficiency</li>
<li>QoS not tied to 4 or 8 hardware queues (i.e., QoS that can support more than 4, 6, or 8 classes of traffic complexity)</li>
<li>QoS policing (switches may do this, with limitations)</li>
<li>QoS shaping (complex/not in chipsets)</li>
<li>QoS: Layer 7 traffic recognition (Cisco “AVC”)</li>
<li>MPLS labels (OK, Nexus 7K M-series line cards are basically routers on a card)</li>
<li>Segment routing</li>
<li>LISP</li>
<li>IPsec or SSL VPN</li>
</ul>
<h1 id="buffer">Buffer</h1>
<p>Switches usually have lots of ports of the same or similar speeds. As such they don&rsquo;t need deep buffers and the buffers are usually shared among all ports or groups of ports.</p>
<p>Routers usually have dedicated buffers per interface or interface module. This is to do with rate shaping when the ingress interface for a traffic flow is much faster than the egress interface. Think GigE LAN port and ADSL WAN port. Switches CAN do rate shaping but that process is hard on the buffers and routers are designed to connect lots of different connectivity types of different speeds together Switches tend to operate on just the one (nominally Ethernet). so if you have traffic entering a 10G uplink at any kind of rate, and the egress port is running at 10M then you will see a lot of output drops on that interface as the TX Buffer gets filled. If you send bursty traffic into a router it will generally cause you to see increased latency as it queues traffic, but loss rates are much lower.</p>
<h1 id="feature-sets">Feature sets.</h1>
<p>Switches tend not to have as many higher layer inspection features as routers. Stuff like NAT, NBAR, IPSec, Tunneling, PBR, IPSLA etc. Lots of those features require process switching, which needs a lot of RAM and CPU resource. Switches tend not to have that as they&rsquo;re designed to do basic routing functions but very fast using specialized hardware, line rate in most cases. Routers are designed to do more complex and fiddly things, not necessarily as quickly. Which is why a £5000 L3 switch will have a much higher routing throughput than a £5000 router. But the Router will be more flexible in the things it can do. Most modern routers will fast switch L3 stuff in hardware as well, but that performance isn&rsquo;t usually quoted in the data sheet because if you ask it to do something like process an ACL or NAT then it has to process switch those packets instead. (I.E they go to the main CPU not processed by an ASIC on the interface module)</p>
<h1 id="route-capacity">Route capacity.</h1>
<p>As I said before Switches are designed to do basic routing very fast based on hardware chipsets built for that purpose. They don&rsquo;t tend to have as much memory or CPU power as a router of equivalent value, so aren&rsquo;t capable of holding as large a routing table as a router. A router is designed to run and interconnect multiple different routing protocols, all of which need memory to store their own topology tables as well as the main RIB. Thus is better equipped to do that. An ASR1001X is a ~£10k router, a Catalyst 4500X is a ~£10k layer 3 switch. The ASR will take 750,000 routes, the 4500X will take only 32,000. Again this is because they are designed for different jobs. L3 switches are designed to work in the middle of a network usually running just the one protocol and routing local traffic. Routers are designed to work at the edge of the network and route internal and external traffic as well as manipulate and filter that traffic.
Buffer sizing depends entirely on the module you put in. How much you&rsquo;ll need to use also depends on your traffic patterns and what you&rsquo;re doing. If you&rsquo;re doing 10G in and 10G out you should get next to no buffering (unless you&rsquo;re doing QoS and rate limiting certain traffic) because traffic can get out as fast as it&rsquo;s being pushed in. If however you have two 10G interfaces taking traffic in and one 10G interface to the internet then upstream traffic will get buffered when there are bursts of ingress traffic that exceed 10G. Google microbursts for more on that topic. The amount of buffer you need depends on how big your average packet size is, how big your bursts are, and how frequently they happen. To complicate matters more most of the buffer memory is broken down into buffer sizes for different sized packets. On some platforms the buffer size is fixed, on others it&rsquo;s adjustable and can borrow system RAM as I/O memory. On cisco stuff you can do show interface will show you the output queue statistics. If you&rsquo;re seeing lots of output drops (and you&rsquo;re not running a QoS policy on the interface) but the interface isn&rsquo;t heavily utilized in terms of bandwidth then you&rsquo;re likely getting microbursts and need to allocate more buffers (more queue length) to that interface.
Most people just eyeball buffers by monitoring the tail drop situation and adjusting. Calculating it properly can get quite complicated.</p>


                

                <hr>
                <ul class="pager">
                    
                    <li class="previous">
                        <a href="/post/elasticsearch/" data-toggle="tooltip" data-placement="top" title="Elastic Search Index, Shards and Replicas">&larr;
                            Previous Post</a>
                    </li>
                    
                    
                </ul>

                
<div id="disqus-comment"></div>



            </div>
            
            <div class="
                col-lg-11 col-lg-offset-1
                col-md-10 col-md-offset-1
                sidebar-container">

                
                
                <section>
                    <hr class="hidden-sm hidden-xs">
                    <h5><a href="/tags/">FEATURED TAGS</a></h5>
                    <div class="tags">
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                    </div>
                </section>
                

                
                
            </div>
        </div>
    </div>
</article>




<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                   
                   <li>
                       <a href='' rel="alternate" type="application/rss+xml" title="Vishnu&#39;s Blog" >
                           <span class="fa-stack fa-lg">
                               <i class="fa fa-circle fa-stack-2x"></i>
                               <i class="fa fa-rss fa-stack-1x fa-inverse"></i>
                           </span>
                       </a>
                   </li>
                   
                    
                    <li>
                        <a href="mailto:bvishnu@hotmail.com">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-envelope fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
		    
                    
                    
                    
                    

                    

		    
                    
                    
                    <li>
                        <a target="_blank" href="https://github.com/vishnubraj">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
		    
                    
                    
                    
                    <li>
                        <a target="_blank" href="https://www.linkedin.com/in/vishnu-b-35639520/">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-linkedin fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
		    
                    
                    
                    
                    
                    
            
            
            
                </ul>
		<p class="copyright text-muted">
                    Copyright &copy; Vishnu&#39;s Blog 2021
                    <br>
                    <a href="https://themes.gohugo.io/hugo-theme-cleanwhite">CleanWhite Hugo Theme</a> by <a href="https://zhaohuabing.com">Huabing</a> |
                    <iframe
                        style="margin-left: 2px; margin-bottom:-5px;"
                        frameborder="0" scrolling="0" width="100px" height="20px"
                        src="https://ghbtns.com/github-btn.html?user=zhaohuabing&repo=hugo-theme-cleanwhite&type=star&count=true" >
                    </iframe>
                </p>
            </div>
        </div>
    </div>
</footer>




<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>






<script>
    
    if($('#tag_cloud').length !== 0){
        async("/js/jquery.tagcloud.js",function(){
            $.fn.tagcloud.defaults = {
                
                color: {start: '#bbbbee', end: '#0085a1'},
            };
            $('#tag_cloud a').tagcloud();
        })
    }
</script>


<script>
    async("https://cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.js", function(){
        var $nav = document.querySelector("nav");
        if($nav) FastClick.attach($nav);
    })
</script>






<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-145238854-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>



</body>
</html>
